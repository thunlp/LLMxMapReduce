# Core LLM Configuration (for self-hosted Parallel Processing Backend)
llm:
  name_or_path: your/model/path      # Local HuggingFace model directory
  url: http://localhost:5002/infer   # Local inference endpoint

# OpenAI-compatible API Settings
openai_api:
  model: model_name             # API model identifier
  name_or_path: your/model/path # Local HuggingFace model directory
  base_url: https://api.openai.com/v1  # for vLLM: http://<host>:<port>/v1/
  api_key: sk-xxxx                  
  is_vllm_sever: false              # Set true for vLLM servers

# Execution Parameters
max_work_count: 4                   # Max parallel workers/requests
use_openai_api: true                # Runtime mode selector


map_prompt: "You are provided with a portion of an article and a question. Read the article portion and follow my instructions to process it.\n\nArticle:\nThe article begins as follows:\n{context}\nThe article concludes here.\n\nQuestion:\n{question}\n\nInstructions:\n\nPlease extract information from the provided passage to try and answer the given question. Note that you only have a part of the entire text, so the information you obtain might not fully answer the question. Therefore, please provide your reasoning for using the extracted information to answer the question and include a confidence score. Follow these steps:\n\n1. Extract Relevant Information: Identify and highlight the key pieces of information from the passage that are relevant to the given question.\n2. Reasoning: Analyze the extracted information and explain how it can be used to address the question. If the information is incomplete, discuss any assumptions or inferences you need to make.\n3. Answer the Question: Based on your reasoning, provide the best possible answer to the question.If, after reasoning, you believe the passage does not contain any information to solve the question, please output \"[NO INFORMATION]\" as the answer.\n4. Confidence Score: Assign a confidence score (out of 5) to your answer based on the completeness and reliability of the extracted information and your reasoning process.For answers that are directly taken literally from the text assign a score of 5.0 points. Answer which is \"[NO INFORMATION]\" can not assign 5.0 points.For all other responses, the highest possible score should be capped at 4.5 points.\nPlease follow this format:\n\nExtracted Information:\nReasoning:\nAnswer:\nConfidence Score:"

collapse_prompt: "You need to process a task with a long context that greatly exceeds your context limit. The only feasible way to handle this is by processing the long context chunk by chunk. You are provided with a question and some information extracted from each chunk. Each piece of information contains Extracted Information, Reasoning, Answer, and a Confidence Score. Read the information and follow my instructions to process it.\n\nExtracted Information:\nThe extracted information begins as follows:\n{context}\nThe extracted information concludes here.\n\nQuestion:\n{question}\n\nInstruction:\n\nIntegrate the extracted information and then reason through the following steps:\n\n1. Integrate Extracted Information: Collect and summarize all the evidence relevant to solving the question. Consider the confidence scores of each piece of extracted information to weigh their reliability. Higher confidence scores should be given more importance in your summary.Should any segment possess a 5-point confidence score, prioritize these information and disregard others. \n2. Analyze: Re-analyze the question based on the summarized information. Use the confidence scores to determine the reliability of different pieces of information, giving more weight to information with higher confidence scores.If there are 5-point information, retain only the 5-point information and discard the others.\n3. Answer the Question: Provide the best possible answer based on the updated information. If, after reasoning, you believe the passage does not contain any information to solve the question, please output \"[NO INFORMATION]\" as the answer. Use the confidence scores to support the reliability of your final answer, prioritizing higher confidence information.\n4. Assign Confidence Score: Give a confidence score (out of 5) for your final answer based on the completeness and reliability of the updated information and your reasoning process. Consider the initial confidence scores of the integrated information to determine your final confidence score.\nPlease follow this format:\n\nExtracted Information:\nReasoning:\nAnswer:\nConfidence Score:"

reduce_prompt: "Given the task below: {question}, provide a final answer (or solution) based on these following evidence: {context}.If any segment possess a 5-point confidence score, prioritize these information and disregard others.Your answer can not mention the confidence score"
